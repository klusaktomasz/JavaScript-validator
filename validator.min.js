/*
 * ====================================================================================================
 * JavaScript validator
 * ====================================================================================================
 * Copyright (c) 2016 Klusak Tomasz
 * Licensed under MIT (https://github.com/klusaktomasz/JavaScript-validator/blob/master/LICENSE)
 * ====================================================================================================
*/ var validators={};Element.prototype.validate=function(t){var e=validators[this];return e?(e.checkForm(),e):(e=new Validator(this,t),validators[this]=e,e)};var Validator=function(t,e){if(this.form=t,this.settings=Validator.defaultOptions,"object"==typeof e)for(var s in e)e.hasOwnProperty(s)&&(this.settings[s]=e[s]);else"undefined"!=typeof e&&console.log("The argument of the validate function must be an object!");this.init()};Validator.defaultOptions={debugMode:!1,rules:{},elements:{},errors:{},success:function(){this.debugMode&&console.log("The validation: success")},error:function(){this.debugMode&&console.log("The validation: error")}},Validator.prototype.init=function(){0==Object.keys(this.settings.rules)&&this.getRules(),this.getElements(),this.checkForm()},Validator.prototype.getRules=function(){for(var t=this.form.getElementsByTagName("input"),e=0;e<t.length;e++){if("submit"==t[e].getAttribute("type"))return;t[e].hasAttribute("id")?this.settings.rules[t[e].getAttribute("id")]={empty:!0}:t[e].hasAttribute("name")&&(this.settings.rules[t[e].getAttribute("name")]={empty:!0})}},Validator.prototype.getElements=function(){for(var t in this.settings.rules)null!=this.form.querySelector("input[id="+t+"]")?("object"!=typeof this.settings.elements.id&&(this.settings.elements.id={}),this.settings.elements.id[t]=this.settings.rules[t]):null!=this.form.querySelector("input[name="+t+"]")?("object"!=typeof this.settings.elements.name&&(this.settings.elements.name={}),this.settings.elements.name[t]=this.settings.rules[t]):this.settings.debugMode&&console.log(t+" does not exists in form")},Validator.prototype.checkForm=function(){this.settings.errors={};for(var t in this.settings.elements)for(var e in this.settings.elements[t])for(var s in this.settings.elements[t][e]){if(this.settings.elements[t][e][s]===!1)break;var i=this.form.querySelector("input["+t+"="+e+"]").value,n=Validator.methods[s](i,this.settings.elements[t][e][s]);n===!1&&("object"!=typeof this.settings.errors[e]&&(this.settings.errors[e]={}),this.settings.errors[e][s]=!1)}0==Object.keys(this.settings.errors)?this.settings.success():this.settings.error()},Validator.methods={empty:function(t){return t.length>0},email:function(t){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},minLength:function(t,e){return t.length>=e},maxLength:function(t,e){return t.length<=e}};
